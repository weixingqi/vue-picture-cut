(function(t){function e(e){for(var o,a,r=e[0],h=e[1],c=e[2],l=0,v=[];l<r.length;l++)a=r[l],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&v.push(n[a][0]),n[a]=0;for(o in h)Object.prototype.hasOwnProperty.call(h,o)&&(t[o]=h[o]);u&&u(e);while(v.length)v.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],o=!0,r=1;r<i.length;r++){var h=i[r];0!==n[h]&&(o=!1)}o&&(s.splice(e--,1),t=a(a.s=i[0]))}return t}var o={},n={app:0},s=[];function a(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=o,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(i,o,function(e){return t[e]}.bind(null,o));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],h=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=h;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"009a":function(t,e,i){"use strict";i("8327")},"3aa3":function(t,e,i){},"55c6":function(t,e,i){},"57f5":function(t,e,i){"use strict";i("55c6")},"5c0b":function(t,e,i){"use strict";i("9c0c")},8327:function(t,e,i){},"9c0c":function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);var o=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("vue-picture-cut",{ref:"pictureCut",staticClass:"cut",attrs:{src:t.src,"init-angle":t.form.initAngle,"msk-option":t.mskOption,"background-color":t.form.backgroundColor}},[i("vue-picture-cut-menu",{attrs:{slot:"menu","max-pixel":t.form.maxPixel,"encoder-options":t.form.encoderOptions,format:t.form.format,theme:t.form.menuTheme,"size-auto-name":t.config(t.language,"auto"),"size-raw-name":t.config(t.language,"raw"),"menu-rotate-name":t.config(t.language,"Rotate"),"cancel-name":t.config(t.language,"Cancel"),"confirm-name":t.config(t.language,"Ok")},on:{"on-change":t.cutChange},slot:"menu"})],1),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.reset}},[t._v("刷新")])],1)},s=[],a=i("d4ec"),r=i("bee2"),h=i("262e"),c=i("2caf"),u=(i("e260"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9ab4")),l=i("1b40"),v={ZN:{download:"点击下载",reset:"重置",do:"执行","Select Picture":"选择图片",Select:"选择","Please select":"请选择","Perform zoom":"执行缩放",Rectangle:"矩形",Ellipse:"椭圆",Unchangeable:"不可改变",Changeable:"可改变","Canvas bgColor":"画布背景色","Mask color":"遮罩颜色","CropBox color":"裁剪框颜色","Menu theme":"菜单栏主题","CropBox shape":"裁剪框形状","CropBox size":"裁剪框尺寸","Scaling factor":"缩放系数","Initial angle":"初始角度","Cropped width":"裁剪比例宽","Cropped height":"裁剪比例高","Max pixels":"裁剪长边像素",compressibility:"图片压缩率","Export format":"裁剪图片格式",preview:"预览",auto:"自由",raw:"原始",Rotate:"旋转",Cancel:"取消",Ok:"确定",'Now you can use the "utils" object to manipulate plug-ins in the browser console.':"现在你可以在浏览器控制台使用“utils”对象操作插件。"}},d=function(t,e){return v[t]&&v[t][e]||e},g=i("5530"),f=i("53ca"),m=(i("99af"),function(){function t(e){Object(a["a"])(this,t),this.photoRoot=e.photoRoot}return Object(r["a"])(t,[{key:"getPhotoMask",value:function(){return this.photoRoot?this.photoRoot.getEventList("PhotoMask"):null}},{key:"getPhotoMain",value:function(){return this.photoRoot?this.photoRoot.getEventList("PhotoMain"):null}},{key:"cut",value:function(t,e,i){if(!this.photoRoot)return null;var o=this.getPhotoMask();return o?"object"===Object(f["a"])(t)?o.clip(null===t||void 0===t?void 0:t.maxPixel,null===t||void 0===t?void 0:t.encoderOptions,null===t||void 0===t?void 0:t.format):"number"===typeof t?o.clip(t,e,i):o.clip():null}},{key:"reset",value:function(){if(this.photoRoot){var t=this.getPhotoMain();null===t||void 0===t||t.reset()}}},{key:"setMaskRound",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.photoRoot){var e=this.getPhotoMask();e&&(e.isRound=t)}}},{key:"setMaskSize",value:function(t,e){if(this.photoRoot){var i=this.getPhotoMask();null===i||void 0===i||i.reset(t,e)}}},{key:"setMaskSizeToOriginal",value:function(){if(this.photoRoot){var t=this.getPhotoMain();return t?(this.setMaskSize(t.imgRect.w,t.imgRect.h),{width:t.imgRect.w,height:t.imgRect.h}):void 0}}},{key:"setMaskResize",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.photoRoot){var e=this.getPhotoMask();null===e||void 0===e||e.setResize(t)}}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.photoRoot&&t%360!==0){var i=this.getPhotoMain();if(i){var o=i.showRect.r+t;return i.setAngle(o,e),o}}}},{key:"rotateTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.photoRoot){var i=this.getPhotoMain();i&&i.showRect.r+t%360&&i.setAngle(t,e)}}},{key:"setFlipV",value:function(t){if(this.photoRoot){var e=this.getPhotoMain();return e?(e.setFlipV(1===e.showRect.sV,t),-1===e.showRect.sV):void 0}}},{key:"setFlipH",value:function(t){if(this.photoRoot){var e=this.getPhotoMain();return e?(e.setFlipH(1===e.showRect.sH,t),-1===e.showRect.sH):void 0}}},{key:"setFlip",value:function(t,e,i){if(this.photoRoot){var o=this.getPhotoMain();null===o||void 0===o||o.setFlip(t,e,i)}}},{key:"scale",value:function(t){var e=this.getPhotoMain();null===e||void 0===e||e.scale(t)}},{key:"getOptions",value:function(){var t=this.photoRoot;if(!t)return null;var e,i,o=t.getEventList("PhotoMain"),n=t.getEventList("PhotoMask");if(o){var s,a=o.imgRect,r=o.showRect;e={src:null===(s=o.originalImg)||void 0===s?void 0:s.src,imgRect:Object(g["a"])({},a),showRect:Object(g["a"])({},r)},e.showRect.x-=e.showRect.w/2,e.showRect.y-=e.showRect.y/2}if(n){var h=n.getMaskRect();i={isRound:n.isRound,x:h.x-h.w/2,y:h.y-h.h/2,w:h.w,h:h.h}}return{canvas:{width:t.width,height:t.height,drawWidth:t.drawWidth,drawHeight:t.drawHeight,magnification:t.magnification},img:e||{},mask:i||{}}}}]),t}());function p(t){if(t&&t.photoRoot)return new m(t);throw new Error("createUtils需要一个为VuePictureCut实例的参数，但是当前得到的是".concat(t,'!\n\n      "createUtils" requires an argument for the "VuePictureCut" instance, but the current result is ').concat(t,"!"))}var y=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.config=d,t.language="ZN",t.src="./demo.jpg",t.blob=null,t.base64=null,t.pictureCut=null,t.form={backgroundColor:void 0,maskColor:void 0,maskBorderColor:void 0,menuTheme:"default",isRound:!1,resize:!0,rotateControl:!0,zoom:.96,initAngle:void 0,width:4,height:5,maxPixel:void 0,encoderOptions:.8,format:"image/jpeg"},t}return Object(r["a"])(i,[{key:"mskOption",get:function(){return{width:this.form.width||1,height:this.form.height||1,isRound:this.form.isRound,resize:this.form.resize,color:this.form.maskColor,borderColor:this.form.maskBorderColor}}},{key:"newSrc",get:function(){return this.blob?URL.createObjectURL(this.blob):""}},{key:"mounted",value:function(){this.pictureCut=this.$refs["pictureCut"],this.utils=window.utils=p(this.pictureCut)}},{key:"inputChange",value:function(t){return this.src=URL.createObjectURL(t),!1}},{key:"cutChange",value:function(t){var e=t.blob,i=t.base64;this.blob=e,this.base64=i}},{key:"reset",value:function(){this.utils.reset()}}]),i}(l["h"]);y=Object(u["a"])([l["a"]],y);var w=y,R=w,b=(i("5c0b"),i("2877")),k=Object(b["a"])(R,n,s,!1,null,null,null),_=k.exports,x=i("ba91"),O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-picture-cut",class:{_default:!t.backgroundColor},style:{"background-color":t.backgroundColor||"#fff"}},[i("div",{ref:"main",staticClass:"vue-picture-cut_main",class:[t.menuPosition],style:t.mainPosition},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"vue-picture-cut_main-loading"},[t._v("loading...")]),i("vue-picture-cut-canvas",{attrs:{loading:t.loading,angle:t.initAngle},on:{"update:loading":function(e){t.loading=e}}}),t._t("default",(function(){return[i("vue-picture-cut-mask",t._b({},"vue-picture-cut-mask",t.mskOption,!1))]}))],2),i("div",{directives:[{name:"show",rawName:"v-show",value:t.thickness>0,expression:"thickness > 0"}],staticClass:"vue-picture-cut_menu-box",class:[t.menuPosition],style:t.memuPosition},[t._t("menu",(function(){return[i("div",{staticClass:"vue-picture-cut_default-menu"},[t.rotateControl?i("div",{staticClass:"vue-picture-cut_slider"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderAngle,expression:"sliderAngle"}],attrs:{type:"range",min:-180,max:180},domProps:{value:t.sliderAngle},on:{__r:function(e){t.sliderAngle=e.target.value}}}),i("div",{staticClass:"vue-picture-cut_slider-box"},[i("div",{staticClass:"vue-picture-cut_slider-box-bar",style:{left:100*t.sliderAngle/361+50+"%"}},[i("div",{staticClass:"vue-picture-cut_slider-box-tips"},[t._v(" "+t._s(t.sliderAngle)+"° ")])])])]):t._e(),t.scaleControl?i("div",{staticClass:"vue-picture-cut_slider"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderAngle,expression:"sliderAngle"}],attrs:{type:"range",min:-180,max:180},domProps:{value:t.sliderAngle},on:{__r:function(e){t.sliderAngle=e.target.value}}}),i("div",{staticClass:"vue-picture-cut_slider-box"},[i("div",{staticClass:"vue-picture-cut_slider-box-bar",style:{left:100*t.sliderAngle/361+50+"%"}},[i("div",{staticClass:"vue-picture-cut_slider-box-tips"},[t._v(" "+t._s(t.sliderAngle)+"° ")])])])]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.src,expression:"src"}],staticClass:"vue-picture-cut_button",on:{click:t.sureCut}},[t._v("ok")])])]}))],2)])},P=[],j=(i("e25e"),i("4795"),i("c975"),i("a9e3"),i("b85c")),M=(i("4ec9"),i("d81d"),i("a630"),i("4160"),i("159b"),i("ace4"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("a15b"),i("e6cf"),i("ac1f"),i("1276"),i("c19f"),i("b0c0"),document.createElement("canvas"));M.style.display="none";var C=M.getContext("2d");function E(t,e,i,o,n){var s=.5*o,a=.5*n,r=.5522848,h=s*r,c=a*r;t.moveTo(e-s,i),t.bezierCurveTo(e-s,i-c,e-h,i-a,e,i-a),t.bezierCurveTo(e+h,i-a,e+s,i-c,e+s,i),t.bezierCurveTo(e+s,i+c,e+h,i+a,e,i+a),t.bezierCurveTo(e-h,i+a,e-s,i+c,e-s,i)}function S(t,e,i){var o=Math.sin(i*Math.PI/180),n=Math.cos(i*Math.PI/180),s=Math.pow(t,2)*Math.pow(o,2)+Math.pow(e,2)*Math.pow(n,2),a=2*(Math.pow(t,2)-Math.pow(e,2))*o*n,r=Math.pow(t,2)*Math.pow(n,2)+Math.pow(e,2)*Math.pow(o,2),h=-Math.pow(t,2)*Math.pow(e,2);return{A:s,B:a,C:r,F:h}}function L(t,e,i,o){var n=Math.pow(e,2)-4*t*i,s=Math.sqrt(4*i*o/n),a=Math.sqrt(4*t*o/n);return{x:-Math.abs(s),y:-Math.abs(a),w:2*Math.abs(s),h:2*Math.abs(a)}}function H(t,e,i){var o=Math.sqrt(t*t+e*e),n=Math.atan2(t,e),s=i*Math.PI/180+n;return{x:o*Math.sin(s),y:o*Math.cos(s)}}function z(t,e){var i=new Uint8Array(t),o=i.length,n=new Array(o);while(o--)n[o]=String.fromCharCode(i[o]);var s=n.join(""),a=window.btoa(s);return"data:"+e+";base64,"+a}function T(t){return new Promise((function(e,i){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="blob",o.onload=function(){if(200===this.status){var t=o.response,n=new FileReader;n.addEventListener("loadend",(function(o){o.target?"string"===typeof o.target.result?e(o.target.result):null!==o.target.result?z(o.target.result,t.type):i():i()})),n.readAsDataURL(t)}else i()},o.onerror=function(t){i(t)},o.send()}))}var A={rotatePoint:H,loadCrossDomainImg:T,cloneJSON:function(t){return JSON.parse(JSON.stringify(t))},loadImg:function(t){return new Promise((function(e,i){var o=new Image;o.addEventListener("load",(function(){e&&e(o)})),o.addEventListener("error",(function(){i&&i(o)})),o.src=t}))},clipBy:function(t,e,i,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.8,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"image/jpeg",a=arguments.length>6?arguments[6]:void 0,r=o.x,h=o.y,c=o.w,u=o.h,l=o.r,v=o.sH,d=o.sV;return M.width=e,M.height=i,C.clearRect(0,0,e,i),C.save(),C.translate(e/2,i/2),"image/jpeg"!==s&&"image/jpg"!==s||(C.fillStyle="#fff",C.fillRect(-e/2,-i/2,e,i)),a&&a(C,e,i),l/360&&C.rotate(-l*Math.PI/180),C.translate(r+c/2,h+u/2),C.scale(v,d),t.setAttribute("crossOrigin","Anonymous"),C.drawImage(t,0,0,t.width,t.height,-c/2,-u/2,c,u),C.scale(v,d),C.translate(-r-c/2-e/2,-h-u/2-i/2),C.restore(),M.toDataURL(s,n)},clipByRound:function(t,e,i,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.8,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"image/jpeg";return this.clipBy(t,e,i,o,n,s,(function(t){t.beginPath(),E(t,0,0,e,i),t.clip(),t.closePath()}))},clipByMax:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t.width>e||t.height>e){var o=t.width/t.height,n=t.width,s=t.height;t.width>e&&(n=e,s=n/o),t.height>e&&(s=e,n=s*o);var a={x:-n/2,y:-s/2,w:n,h:s,r:0,sV:1,sH:1},r=this.clipBy(t,n,s,a,i);return{src:r,file:this.base64ToBlob(r)}}},base64ToBlob:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";if(!window.atob)return null;for(var i=window.atob(t.split(",")[1]),o=new ArrayBuffer(i.length),n=new Uint8Array(o),s=0,a=i.length;s<a;s++)n[s]=255&i.charCodeAt(s);var r=null;try{r=new Blob([n],{type:e})}catch(l){var h=window,c=h.BlobBuilder||h.WebKitBlobBuilder||h.MozBlobBuilder||h.MSBlobBuilder;if("TypeError"===l.name&&c){var u=new c;u.append(n.buffer),r=u.getBlob(e)}else"InvalidStateError"===l.name&&(r=new Blob([o],{type:e}))}return r},doubleTouche:function(t,e){if(void 0===e)return{core:{x:t.x,y:t.y},length:0,lengthX:0,lengthY:0,angle:0};var i={x:(t.x+e.x)/2,y:(t.y+e.y)/2},o=e.x-t.x,n=e.y-t.y,s=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),a=180*Math.acos(o/s)/Math.PI;return{core:i,length:s,lengthX:o,lengthY:n,angle:a}},getEllipseRectByRect:function(t,e,i){if(!(i/180))return{x:-t/2,y:-e/2,w:t,h:e};var o=t/2,n=e/2,s=S(o,n,i),a=s.A,r=s.B,h=s.C,c=s.F;return L(a,r,h,c)},getRectByRect:function(t,e,i){if(!(i/180))return{x:-t/2,y:-e/2,w:t,h:e};var o=H(-t/2,-e/2,i),n=H(t/2,-e/2,i),s=Math.max(Math.abs(o.x),Math.abs(n.x)),a=Math.max(Math.abs(o.y),Math.abs(n.y));return{x:-s,y:-a,w:s+s,h:a+a}}},B=function(){function t(){Object(a["a"])(this,t),this.debug=!1,this.isFirefox=navigator.userAgent.indexOf("Firefox")>0,this.eventList=new Map,this.priorityEvent=null,this.wheelTime=0,this.wheelTimeOut=0,this.wheelstatus=!1}return Object(r["a"])(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;this.root=t,this.width=t.offsetWidth,this.height=t.offsetHeight,this.drawWidth=Math.floor(this.width*e),this.drawHeight=Math.floor(this.height*e),this.magnification=e,this.core={x:Math.floor(this.drawWidth/2),y:Math.floor(this.drawHeight/2)},this._eventInit()}},{key:"cursor",set:function(t){this.root.style.cursor=t}},{key:"addEventList",value:function(t){this.eventList.set(t.className,t)}},{key:"getEventList",value:function(t){var e=this.eventList.get(t);return e||null}},{key:"deleteEventList",value:function(t){this.eventList.delete(t)}},{key:"setPriority",value:function(t){this.priorityEvent||(this.priorityEvent=t)}},{key:"getPriority",value:function(){return this.priorityEvent?this.priorityEvent:null}},{key:"deletePriority",value:function(t){this.priorityEvent&&this.priorityEvent.className===t&&(this.priorityEvent=null)}},{key:"_eventInit",value:function(){var t=this;this.root.addEventListener("touchstart",(function(e){var i=e||window.event;i.preventDefault();var o=i.changedTouches;t._touchStart(o)}),!1),this.root.addEventListener("touchend",(function(e){var i=e||window.event;i.preventDefault();var o=i.changedTouches;t._touchEnd(o)}),!1),this.root.addEventListener("touchmove",(function(e){var i=e||window.event;i.preventDefault();var o=i.changedTouches;t._touchMove(o)}),!1),this.root.addEventListener("mousedown",(function(e){var i=e||window.event;i.preventDefault(),t._mouseDown(i)}),!1),this.root.addEventListener("mouseup",(function(e){var i=e||window.event;i.preventDefault(),t._mouseUp(i)}),!1),this.root.addEventListener("mouseleave",(function(e){var i=e||window.event;i.preventDefault(),t._mouseUp(i)}),!1),this.root.addEventListener("mousemove",(function(e){var i=e||window.event;i.preventDefault(),t._mouseMove(i)}),!1),this.isFirefox?this.root.addEventListener("DOMMouseScroll",(function(e){var i=e||window.event;i.preventDefault();var o=-40*i.detail;t._mouseWheel(o,{x:i.layerX*t.magnification-t.core.x,y:i.layerY*t.magnification-t.core.y})}),!1):this.root.addEventListener("mousewheel",(function(e){var i=e||window.event;i.preventDefault();var o=i.wheelDelta||i.detail;t._mouseWheel(o,{x:i.offsetX*t.magnification-t.core.x,y:i.offsetY*t.magnification-t.core.y})}),!1)}},{key:"_touchStart",value:function(t){var e=this,i=Array.from(t).map((function(t){return e._getTouchePoint(t)}));if(this.priorityEvent)this.priorityEvent.touchStart(A.cloneJSON(i));else{var o,n=[],s=Object(j["a"])(this.eventList.values());try{for(s.s();!(o=s.n()).done;){var a=o.value;if(a.touchStart(A.cloneJSON(i)),this.priorityEvent)break;n.push(a)}}catch(r){s.e(r)}finally{s.f()}this.priorityEvent&&n.forEach((function(t){return t.touchEnd(A.cloneJSON(i))}))}}},{key:"_touchEnd",value:function(t){var e=this,i=Array.from(t).map((function(t){return e._getTouchePoint(t)}));this.priorityEvent?this.priorityEvent.touchEnd(A.cloneJSON(i)):this.eventList.forEach((function(t){return t.touchEnd(A.cloneJSON(i))}))}},{key:"_touchMove",value:function(t){var e=this,i=Array.from(t).map((function(t){return e._getTouchePoint(t)}));this.priorityEvent?this.priorityEvent.touchMove(A.cloneJSON(i)):this.eventList.forEach((function(t){return t.touchMove(A.cloneJSON(i))}))}},{key:"_mouseDown",value:function(t){var e=[this._getMousePoint(t)];if(this.priorityEvent)this.priorityEvent.touchStart(A.cloneJSON(e));else{var i,o=[],n=Object(j["a"])(this.eventList.values());try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s.touchStart(A.cloneJSON(e)),this.priorityEvent)break;o.push(s)}}catch(a){n.e(a)}finally{n.f()}this.priorityEvent&&o.forEach((function(t){return t.touchEnd(A.cloneJSON(e))}))}}},{key:"_mouseUp",value:function(t){var e=[this._getMousePoint(t)];this.priorityEvent?this.priorityEvent.touchEnd(A.cloneJSON(e)):this.eventList.forEach((function(t){return t.touchEnd(A.cloneJSON(e))}))}},{key:"_mouseMove",value:function(t){var e=[this._getMousePoint(t)];this.priorityEvent?this.priorityEvent.touchMove(A.cloneJSON(e)):this.eventList.forEach((function(t){return t.touchMove(A.cloneJSON(e))}))}},{key:"_mouseWheel",value:function(t,e){var i=this;clearTimeout(this.wheelTimeOut);var o=Date.now(),n=o-this.wheelTime>400&&!this.wheelstatus;n&&(this.wheelstatus=!0,this._wheelStart(t,e)),this.wheelTime=o,this.wheelTimeOut=setTimeout((function(){i.wheelstatus=!1,i._wheelEnd(t,e)}),400),n||this._wheelChange(t,e)}},{key:"_wheelStart",value:function(t,e){if(this.priorityEvent)this.priorityEvent.wheelStart(t,A.cloneJSON(e));else{var i,o=[],n=Object(j["a"])(this.eventList.values());try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s.wheelStart(t,A.cloneJSON(e)),this.priorityEvent)break;o.push(s)}}catch(a){n.e(a)}finally{n.f()}this.priorityEvent&&o.forEach((function(i){return i.wheelEnd(t,A.cloneJSON(e))}))}}},{key:"_wheelChange",value:function(t,e){this.priorityEvent?this.priorityEvent.wheelChange(t,A.cloneJSON(e)):this.eventList.forEach((function(i){return i.wheelChange(t,A.cloneJSON(e))}))}},{key:"_wheelEnd",value:function(t,e){this.priorityEvent?this.priorityEvent.wheelEnd(t,A.cloneJSON(e)):this.eventList.forEach((function(i){return i.wheelEnd(t,A.cloneJSON(e))}))}},{key:"_getTouchePoint",value:function(t){var e=this._getClientPosition(this.root,{x:0,y:0});return{x:(t.clientX-e.x)*this.magnification-this.core.x,y:(t.clientY-e.y)*this.magnification-this.core.y,id:t.identifier}}},{key:"_getMousePoint",value:function(t){return{x:(this.isFirefox?t.layerX:t.offsetX)*this.magnification-this.core.x,y:(this.isFirefox?t.layerY:t.offsetY)*this.magnification-this.core.y,id:0}}},{key:"_getClientPosition",value:function(t,e){var i=t.getBoundingClientRect();return e.x+=i.left,e.y+=i.top,e}}]),t}(),V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{staticClass:"vue-picture-cut_canvas"})},N=[],I=i("3835"),F=(i("b680"),i("cb29"),i("4de4"),{linear:[[0,0],[1,1]],ease:[[0,0],[.25,.1],[1,1]],"ease-in":[[0,0],[.42,0],[1,1]],"ease-out":[[0,0],[.58,1],[1,1]],"ease-in-out":[[0,0],[.42,0],[.58,1],[1,1]]}),J=function(){function t(){Object(a["a"])(this,t),this.bezierCtrlNodesArr=[]}return Object(r["a"])(t,[{key:"setOpt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.bezierCtrlNodesArr=t,this}},{key:"getPoint",value:function(t){var e=this,i=this.bezierCtrlNodesArr,o=i.length-1,n=0,s=0;return i.forEach((function(i,a){a?(n+=e.factorial(o)/e.factorial(a)/e.factorial(o-a)*i[0]*Math.pow(1-t,o-a)*Math.pow(t,a),s+=e.factorial(o)/e.factorial(a)/e.factorial(o-a)*i[1]*Math.pow(1-t,o-a)*Math.pow(t,a)):(n+=i[0]*Math.pow(1-t,o-a)*Math.pow(t,a),s+=i[1]*Math.pow(1-t,o-a)*Math.pow(t,a))})),{x:n,y:s}}},{key:"factorial",value:function(t){return t<=1?1:t*this.factorial(t-1)}}]),t}();(function(){for(var t=0,e=["webkit","moz"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),o=Math.max(0,16.7-(i-t)),n=window.setTimeout((function(){e(i+o)}),o);return t=i+o,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})();var W=function(){function t(e){Object(a["a"])(this,t),this.bezier=new J,this.duration=1e3,this.timing=[],this.delay=0,this.iteration=1,this.direction="normal",this.change=function(){return!1},this.end=function(){},this.startTime=0,this.id=0,void 0!==e.duration&&(this.duration=e.duration),void 0!==e.timing&&("string"===typeof e.timing?this.timing=F[e.timing]||F["linear"]:this.timing=e.timing),void 0!==e.delay&&(this.delay=e.delay),void 0!==e.iteration&&(this.iteration=e.iteration),void 0!==e.direction&&(this.direction=e.direction),void 0!==e.change&&(this.change=e.change),void 0!==e.end&&(this.end=e.end);var i="infinite"===this.iteration?9999999999999:this.iteration*this.duration;this.times="alternate"===this.direction||"alternate-reverse"===this.direction?2*i:i,this.bezier.setOpt(this.timing)}return Object(r["a"])(t,[{key:"start",value:function(){var t=this;return this.startTime=0,this.delay?setTimeout((function(){t.startTime=Date.now(),t._do()}),this.delay):(this.startTime=Date.now(),this._do()),this}},{key:"_do",value:function(){var t=this;this.id=requestAnimationFrame((function(){var e=Date.now()-t.startTime,i=e/t.duration,o=parseInt(String(i));switch(i-=o,t.direction){case"normal":i=e<t.times?i:1;break;case"reverse":i=e<t.times?1-i:0;break;case"alternate":i=o%2?e<t.times?1-i:0:e<t.times?i:1,o/2===t.iteration&&(i=0);break;case"alternate-reverse":i=o%2?e<t.times?i:1:e<t.times?1-i:0,o/2===t.iteration&&(i=1);break}var n=t.bezier.getPoint(i),s=n.x,a=n.y,r=t.change(s,a);!1!==r&&e<t.times?t._do():t.end()}))}},{key:"abort",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.id>0&&cancelAnimationFrame(this.id),this.id=0,t&&this.end()}}]),t}();function X(t){return new W(t)}var q=function(){function t(e,i){Object(a["a"])(this,t),this.className="PhotoMain",this.imgRect={x:0,y:0,w:0,h:0},this.showRect={x:0,y:0,w:0,h:0,r:0,sV:1,sH:1},this.moveRect={minX:null,minY:null,maxX:null,maxY:null},this.touchList=[],this.status=null,this.touchstartPoint={x:0,y:0},this.touchstartEvent=A.doubleTouche({x:0,y:0,id:0}),this.animation=void 0,this.scaleTimer=null,this.loadImgEd=new Map,e.width=i.drawWidth,e.height=i.drawHeight,i.addEventList(this),this.root=i,this.canvas=e,this.ctx=e.getContext("2d"),this.ctx.translate(this.root.core.x,this.root.core.y)}return Object(r["a"])(t,[{key:"setSrc",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.showRect.r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.clear(),this.src=t,this.loadingEvent&&this.loadingEvent(!0),A.loadImg(t).then((function(t){o||(e.originalImg=t);var n=A.clipByMax(t,1500);if(n)e.setSrc(n.src,i,++o);else{if(e.img=t,e._initRect(),e.showRect.r=i,e.moveRect.minX&&e.moveRect.minY){e.loadImgEd.forEach((function(t){t&&t()}));var s=e.showRect,a=s.x,r=s.y,h=s.w,c=s.h,u=s.r,l=s.sV,v=s.sH,d=e._checkRange({x:a,y:r,w:h,h:c,r:u,sV:l,sH:v});e.showRect={x:a+d[0],y:r+d[1],w:h+d[2],h:c+d[3],r:u,sV:l,sH:v}}else e._initMoveRange();e._draw(e.imgRect,e.showRect),e.showRect.r=i,e.loadingEvent&&e.loadingEvent(!1),e.root.onPhotoChange&&e.root.onPhotoChange({target:e,type:"imageInit"})}}),(function(){e.loadingEvent&&e.loadingEvent(!1)}))}},{key:"reset",value:function(){if(this.img){if(console.log("reset"),this._initRect(),this.showRect.r=0,this.showRect.sV=1,this.showRect.sH=1,this.moveRect.minX&&this.moveRect.minY){this.loadImgEd.forEach((function(t){t&&t()}));var t=this.showRect,e=t.x,i=t.y,o=t.w,n=t.h,s=t.r,a=t.sV,r=t.sH,h=this._checkRange();this.showRect={x:e+h[0],y:i+h[1],w:o+h[2],h:n+h[3],r:s,sV:a,sH:r}}else this._initMoveRange();this._draw(this.imgRect,this.showRect),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageReset"})}}},{key:"setMoveRange",value:function(t,e,i,o,n,s){if(this._initMoveRange(t,e,i,o),!this.img)return[0,0,0,0];if(n&&s){var a=this.showRect,r=a.x,h=a.y,c=a.w,u=a.h,l=a.r,v=a.sV,d=a.sH,f=n.x-r,m=n.y-h,p=c*s-c,y=u*s-u,w=this._checkRange(Object(g["a"])(Object(g["a"])({},n),{},{w:c*s,h:u*s,r:l,sV:v,sH:d}));return[f+w[0],m+w[1],p+w[2],y+w[3]]}var R=this._checkRange(),b=Object(I["a"])(R,4),k=b[0],_=b[1],x=b[2],O=b[3];return[k,_,x,O]}},{key:"setAngle",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.img?(i&&this.animation&&this.animation.abort(),this.loadImgEd.forEach((function(o){o&&o({showRect:Object(g["a"])(Object(g["a"])({},e.showRect),{},{r:t})},i)})),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageAngle"})):this.showRect.r=t}},{key:"setFlip",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=-1===this.showRect.sH,n=-1===this.showRect.sV;if(o!==e||n!==t){var s;if(this.img)if(i)null===(s=this.animation)||void 0===s||s.abort(),this.doAnimation(0,0,0,0,0,t,e);else this.showRect.sV=t?-1:1,this.showRect.sH=e?-1:1,this._draw(this.imgRect,this.showRect);this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageFlip"})}}},{key:"setFlipV",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=-1===this.showRect.sV;if(i!==t&&this.img){var o;if(e)null===(o=this.animation)||void 0===o||o.abort(),this.doAnimation(0,0,0,0,0,t);else this.showRect.sV=t?-1:1,this._draw(this.imgRect,this.showRect);this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageFlipV"})}}},{key:"setFlipH",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=-1===this.showRect.sH;if(i!==t&&this.img){var o;if(e)null===(o=this.animation)||void 0===o||o.abort(),this.doAnimation(0,0,0,0,0,void 0,t);else this.showRect.sH=t?-1:1,this._draw(this.imgRect,this.showRect);this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageFlipH"})}}},{key:"scale",value:function(t,e){var i,o=this;if(this.img&&!(t<0)&&1!==t){null!==this.scaleTimer&&clearTimeout(this.scaleTimer),null===(i=this.animation)||void 0===i||i.abort(),this.touchstartPoint={x:0,y:0};var n=this._changePointByCanvas(this.showRect);"origin"===e?this._scaleByNumber(t,n):this._scaleByZoom(t,n),this._draw(this.imgRect,this.showRect),this.scaleTimer=setTimeout((function(){var t=o._checkRange(),e=Object(I["a"])(t,4),i=e[0],n=e[1],s=e[2],a=e[3];o.doAnimation(i,n,s,a,0)}),500)}}},{key:"onLoading",value:function(t){this.loadingEvent=t}},{key:"setShowRect",value:function(t){this.img&&(this.showRect=t,this._draw(this.imgRect,this.showRect))}},{key:"_changePointByCanvas",value:function(t){var e=this.showRect.r;return A.rotatePoint(t.x,t.y,e)}},{key:"_changePointByImage",value:function(t){var e=this.showRect.r;return A.rotatePoint(t.x,t.y,-e)}},{key:"_initRect",value:function(){var t=this.img;if(t){var e=this.root.drawWidth,i=this.root.drawHeight,o=t.width/e,n=t.height/i,s=o<n?n:o,a=t.width/s,r=t.height/s;this.imgRect={x:0,y:0,w:t.width,h:t.height},this.showRect={x:0,y:0,w:a,h:r,r:this.showRect.r,sV:this.showRect.sV,sH:this.showRect.sH}}}},{key:"_initMoveRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null===t||null===e||null===i||null===o){var n=this.imgRect,s=n.w,a=n.h;if(0===s)return;var r=this.root.drawWidth,h=this.root.drawHeight,c=r/h,u=s/a;if(c>u){var l=h*u,v=h;t=-l/2,e=-v/2}else{var d=r,g=r/u;t=-d/2,e=-g/2}i=-t,o=-e,this.moveRect={minX:t,minY:e,maxX:i,maxY:o}}else this.moveRect={minX:t,minY:e,maxX:i,maxY:o}}},{key:"_draw",value:function(t,e){var i=Number((e.w/t.w).toFixed(1));if(console.log(i,"zoomNow"),_t.$bus.$emit("scale",i>10?10:i),i<=10&&(this.clear(),this.img)){var o=e.x,n=e.y,s=e.w,a=e.h,r=e.r,h=e.sV,c=e.sH,u=this.ctx;if(u.save(),u.rotate(-r*Math.PI/180),u.translate(o,n),u.scale(c,h),u.drawImage(this.img,t.x,t.y,t.w,t.h,-s/2,-a/2,s,a),u.scale(-c,-h),u.translate(-o,-n),this.root.debug){u.strokeStyle="#0f0",u.lineWidth=2;for(var l=0;l<this.root.drawHeight/200;l++)u.beginPath(),u.moveTo(-this.root.core.x,100*l+50),u.lineTo(this.root.core.x,100*l+50),u.stroke(),u.closePath(),u.beginPath(),u.moveTo(-this.root.core.x,100*-l-50),u.lineTo(this.root.core.x,100*-l-50),u.stroke(),u.closePath();for(var v=0;v<this.root.drawWidth/200;v++)u.beginPath(),u.moveTo(100*v+50,-this.root.core.y),u.lineTo(100*v+50,this.root.core.y),u.stroke(),u.closePath(),u.beginPath(),u.moveTo(100*-v-50,-this.root.core.y),u.lineTo(100*-v-50,this.root.core.y),u.stroke(),u.closePath();null!==this.moveRect.minX&&null!==this.moveRect.maxX&&null!==this.moveRect.minY&&null!==this.moveRect.maxY&&(u.strokeStyle="#00f",u.fillStyle="rgba(0,0,0,0)",u.lineWidth=2,u.strokeRect(this.moveRect.minX,this.moveRect.minY,this.moveRect.maxX-this.moveRect.minX,this.moveRect.maxY-this.moveRect.minY)),u.beginPath(),u.fillStyle="#fff",u.arc(0,0,6,0,2*Math.PI),u.fill(),u.closePath()}u.restore()}}},{key:"clear",value:function(){this.ctx.clearRect(-this.root.core.x,-this.root.core.y,this.root.drawWidth,this.root.drawHeight)}},{key:"touchEnd",value:function(t){this.img&&this.touchList.length&&(t=this.touchList.filter((function(e){return e.id!==t[0].id})),0===t.length?this.wheelEnd():1===t.length&&this._touchStart1(t[0]),this.touchList=t)}},{key:"touchMove",value:function(t){if(this.img)if(1===t.length)this._touchMove1(t[0]);else if(2===t.length)this._touchMove2(t[0],t[1]);else if(t.length>2){var e=this.touchList.map((function(t){return t.id}));t=t.filter((function(t){return e.indexOf(t.id)>-1})),2===t.length&&this._touchMove2(t[0],t[1])}}},{key:"touchStart",value:function(t){var e;if(this.img){null===(e=this.animation)||void 0===e||e.abort();var i=t[0];this.touchList.length?1===this.touchList.length&&this.touchList[0].id!==i.id&&(this.touchList.push(i),this._touchStart2(this.touchList[0],this.touchList[1])):(this.touchList.push(i),this._touchStart1(i))}}},{key:"wheelStart",value:function(t,e){this.img&&(this.status="scale",this.wheelChange(t,e))}},{key:"wheelChange",value:function(t,e){var i;if(this.img){null===(i=this.animation)||void 0===i||i.abort(),this.touchstartEvent=A.doubleTouche(e);var o=this.touchstartEvent.core,n=this._changePointByImage(o);this.touchstartPoint=this._getPointerLocation(n),this.root.setPriority(this),t=1+5e-4*t,t=t>1.08?1.08:t<.92593?.92593:t,this._scaleByZoom(t,e),this._draw(this.imgRect,this.showRect)}}},{key:"wheelEnd",value:function(){if(this.img){this.status=null,this.touchstartEvent=A.doubleTouche({x:0,y:0,id:0}),this.touchstartPoint={x:0,y:0};var t=this._checkRange(),e=Object(I["a"])(t,4),i=e[0],o=e[1],n=e[2],s=e[3];(i||o||n||s)&&this.doAnimation(i,o,n,s,0),this.root.deletePriority(this.className)}}},{key:"_touchStart1",value:function(t){this.status="move",this.touchstartEvent=A.doubleTouche(t);var e=this._changePointByImage(t);this.touchstartPoint=this._getPointerLocation(e)}},{key:"_touchStart2",value:function(t,e){var i=this.showRect,o=i.sV,n=i.sH;this.status="scale",this.touchstartEvent=!o&&n||o&&!n?A.doubleTouche(e,t):A.doubleTouche(t,e);var s=this.touchstartEvent.core,a=this._changePointByImage(s);this.touchstartPoint=this._getPointerLocation(a),this.root.setPriority(this),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageTouchStart2"})}},{key:"_touchMove1",value:function(t){"move"===this.status&&(this.root.setPriority(this),this.touchList[0]=t,this._move(t),this._draw(this.imgRect,this.showRect),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageMove"}))}},{key:"_touchMove2",value:function(t,e){if("scale"===this.status){this.touchList=[t,e];var i=A.doubleTouche(t,e);this._scaleByLocation(i),this._draw(this.imgRect,this.showRect)}}},{key:"_getPointerLocation",value:function(t){return{x:t.x-this.showRect.x,y:t.y-this.showRect.y}}},{key:"_move",value:function(t){var e=this.touchstartPoint,i=this._changePointByImage(t);this.showRect.x=i.x-e.x,this.showRect.y=i.y-e.y}},{key:"_scaleByLocation",value:function(t){var e=t.length/this.touchstartEvent.length;e=e<.9091?.9091:e,e=e>1.1?1.1:e,this._scaleByZoom(e,t.core),this.touchstartEvent=t}},{key:"_scaleByNumber",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=this.touchstartPoint;this.touchstartPoint={x:o.x*t,y:o.y*t},o=this.touchstartPoint;var n=this.showRect,s=n.r,a=n.sV,r=n.sH,h=this.imgRect,c=h.w,u=h.h,l=this._changePointByImage(e),v=this.showRect={x:l.x-o.x,y:l.y-o.y,w:c*t,h:u*t,r:s+i,sV:a,sH:r},d=this._checkRange(v),g=Object(I["a"])(d,4),f=g[0],m=g[1],p=g[2],y=g[3],w=f||m||p||y;w&&(this.showRect=this._getShowRect(f,m,p,y,0)),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageScale"}),w&&(this.showRect=v)}},{key:"_scaleByZoom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=this.touchstartPoint;this.touchstartPoint={x:o.x*t,y:o.y*t},o=this.touchstartPoint;var n=this.showRect,s=n.w,a=n.h,r=n.r,h=n.sV,c=n.sH,u=this._changePointByImage(e),l=this.showRect={x:u.x-o.x,y:u.y-o.y,w:s*t,h:a*t,r:r+i,sV:h,sH:c},v=this._checkRange(l),d=Object(I["a"])(v,4),g=d[0],f=d[1],m=d[2],p=d[3],y=g||f||m||p;y&&(this.showRect=this._getShowRect(g,f,m,p,0)),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"imageScale"}),y&&(this.showRect=l)}},{key:"_checkRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.showRect,e=t.x,i=t.y,o=t.w,n=t.h;e-=o/2,i-=n/2;var s=this.moveRect,a=s.minX,r=s.minY,h=s.maxX,c=s.maxY;a=a||0,r=r||0,h=h||0,c=c||0;var u=e,l=i,v=o,d=n,g=this._getPohtoByRangeLocation([e,i,o,n]),f=o/n;g[4]<=0&&(v=h-a,d=v/f,u=e+(o-v)/2,l=i+(n-d)/2),g=this._getPohtoByRangeLocation([u,l,v,d]),g[5]<=0&&(d=c-r,v=d*f,u=e+(o-v)/2,l=i+(n-d)/2),g=this._getPohtoByRangeLocation([u,l,v,d]),g[0]>0&&(u-=g[0]),g[1]>0&&(l-=g[1]),g[2]<0&&(u-=g[2]),g[3]<0&&(l-=g[3]);var m=v-o,p=d-n;return[u-e+m/2,l-i+p/2,m,p]}},{key:"_getPohtoByRangeLocation",value:function(t){var e=this.showRect,i=e.x,o=e.y,n=e.w,s=e.h,a=this.moveRect,r=a.minX,h=a.minY,c=a.maxX,u=a.maxY;if(t){var l=Object(I["a"])(t,4);i=l[0],o=l[1],n=l[2],s=l[3]}return[i-(r||0),o-(h||0),i+n-(c||0),o+s-(u||0),n-(c||0)+(r||0),s-(u||0)+(h||0)]}},{key:"_getShowRect",value:function(t,e,i,o,n,s,a){var r=this.showRect,h=r.x,c=r.y,u=r.w,l=r.h,v=r.r,d=r.sV,g=r.sH;return s=void 0===s?-1===d:s,a=void 0===a?-1===g:a,{x:h+t,y:c+e,w:u+i,h:l+o,r:v+n,sV:s?-1:1,sH:a?-1:1}}},{key:"doAnimation",value:function(t,e,i,o,n,s,a,r){var h=this;if(t||e||i||o||n||void 0!==s||void 0!==a){var c=this.showRect,u=c.x,l=c.y,v=c.w,d=c.h,g=c.r,f=c.sV,m=c.sH,p=this._getShowRect(t,e,i,o,n,s,a),y=p.sV-f,w=p.sH-m;(t||e||i||o||n||w||y)&&(this._showRect=this.showRect,this.showRect=p,this.animation=X({duration:300,timing:"ease-in-out",change:function(s,a){h._showRect={x:u+a*t,y:l+a*e,w:v+a*i,h:d+a*o,r:g+a*n,sV:f+a*y,sH:m+a*w},h._draw(h.imgRect,h._showRect)},end:function(){h._showRect&&(h.showRect=h._showRect,h._showRect=void 0),r&&r()}}).start())}}}]),t}(),Y=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.photoMain=null,t}return Object(r["a"])(i,[{key:"photoRoot",get:function(){var t;return null===(t=this.cutRoot)||void 0===t?void 0:t.photoRoot}},{key:"watchAngle",value:function(t){this.photoMain&&void 0!==t&&this.photoMain.setAngle(t,!0)}},{key:"created",value:function(){this.cutRoot=this.getCutRoot()}},{key:"mounted",value:function(){var t=this;setTimeout((function(){t.photoMain=new q(t.$el,t.photoRoot),t.photoMain.onLoading((function(e){t._loading=e}))}),0)}}]),i}(l["h"]);Object(u["a"])([Object(l["d"])({type:Number,required:!1})],Y.prototype,"angle",void 0),Object(u["a"])([Object(l["e"])("loading",{type:Boolean,default:!1})],Y.prototype,"_loading",void 0),Object(u["a"])([Object(l["i"])("angle")],Y.prototype,"watchAngle",null),Object(u["a"])([Object(l["c"])("getCutRoot")],Y.prototype,"getCutRoot",void 0),Y=Object(u["a"])([l["a"]],Y);var D=Y,U=D,$=Object(b["a"])(U,V,N,!1,null,null,null),Z=$.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"vue-picture-cut_mask",attrs:{preserveAspectRatio:"none",viewBox:t.viewBox}},[i("path",{staticClass:"cls-1",attrs:{fill:t.color||"rgba(0,0,0,.5)",d:"M0,0 H"+t.drawWidth+" V"+t.drawHeight+" H0 V0 Z "+t.round}}),t.thisResize||!t.thisRound?i("rect",t._b({staticClass:"cls-3",style:{"stroke-dasharray":t.border,stroke:t.thisRound?"rgba(255,255,255,.7)":t.borderColor||"#ff5500"}},"rect",t.rect,!1)):t._e(),t.thisRound?i("path",{staticClass:"cls-2",attrs:{stroke:t.borderColor||"#ff5500",d:t.round}}):t._e(),t.thisResize?i("path",{staticClass:"cls-4",attrs:{d:t.TLHorn}}):t._e(),t.thisResize?i("path",{staticClass:"cls-4",attrs:{d:t.TRHorn}}):t._e(),t.thisResize?i("path",{staticClass:"cls-4",attrs:{d:t.BLHorn}}):t._e(),t.thisResize?i("path",{staticClass:"cls-4",attrs:{d:t.BRHorn}}):t._e(),t.cutRoot&&t.cutRoot.cutSize?i("text",{staticClass:"text",attrs:{x:t.rect.x,y:t.rect.y-10}},[t._t("text",(function(){return[t._v(" "+t._s(t.cutRoot.cutSize.w+" x "+t.cutRoot.cutSize.h)+" ")]}))],2):t._e()])},K=[],Q=(i("cca6"),i("7db0"),new Map([["Top Left","nw-resize"],["Top Right","ne-resize"],["Bottom Left","sw-resize"],["Bottom Right","se-resize"],["Top","n-resize"],["Left","w-resize"],["Right","e-resize"],["Bottom","s-resize"]])),tt=function(){function t(e,i,o,n,s){var r=this;Object(a["a"])(this,t),this.className="PhotoMask",this._isRound=!1,this.touche=null,this.touchePosition=void 0,this.animation=void 0,e.addEventList(this),this.root=e,this.width=i||1,this.height=o||1,this.resize=n,this.faultTolerant=8*e.magnification;var h=this.maskRect=this._getMaskRect();this._draw=s,s(this.maskRect,!1,this);var c=this.root.getEventList("PhotoMain");c&&(c.loadImgEd.set(this.className,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return r._reset(c,t,e)})),c.setMoveRange(h.x,h.y,h.x+h.w,h.y+h.h))}return Object(r["a"])(t,[{key:"getMaskRect",value:function(){return this.maskRect}},{key:"_reset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object.assign({},t,e),n=this._getMaskRect(),s=o.showRect,a=this._isRound?A.getEllipseRectByRect(n.w,n.h,s.r):A.getRectByRect(n.w,n.h,s.r),r=t.setMoveRange(a.x,a.y,a.x+a.w,a.y+a.h),h=Object(I["a"])(r,4),c=h[0],u=h[1],l=h[2],v=h[3];i?t.doAnimation(c,u,l,v,s.r-t.showRect.r):t.setShowRect({x:s.x+c,y:s.y+u,w:s.w+l,h:s.h+v,r:s.r,sV:s.sV,sH:s.sH})}},{key:"reset",value:function(t,e){this.width=t||1,this.height=e||1;var i=this._getMaskRect(),o=i.x-this.maskRect.x,n=i.y-this.maskRect.y,s=i.w-this.maskRect.w,a=i.h-this.maskRect.h,r=this.root.getEventList("PhotoMain");if(r){var h=r.showRect,c=i.w/this.maskRect.w,u=A.rotatePoint(this.maskRect.x+this.maskRect.w/2,this.maskRect.y+this.maskRect.h/2,-h.r),l={x:(h.x-u.x)*c,y:(h.y-u.y)*c},v=this._isRound?A.getEllipseRectByRect(i.w,i.h,h.r):A.getRectByRect(i.w,i.h,h.r),d=r.setMoveRange(v.x,v.y,v.x+v.w,v.y+v.h,l,c),g=Object(I["a"])(d,4),f=g[0],m=g[1],p=g[2],y=g[3];r.doAnimation(f,m,p,y,0)}this._animation(o,n,s,a),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"maskReset"})}},{key:"isRound",get:function(){return this._isRound},set:function(t){this._isRound=t,this._draw(this.maskRect,!1,this),this.reset(this.maskRect.w,this.maskRect.h)}},{key:"setResize",value:function(t){t||this.touchEnd(),this.resize=t,this._draw(this.maskRect,!1,this),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"maskResize"})}},{key:"getResize",value:function(){return this.resize}},{key:"getCutInfo",value:function(t){var e=this.root.getEventList("PhotoMain");if(!e||!e.originalImg||!e.img)return null;var i,o=e.originalImg,n=e.showRect,s=this.maskRect;if(t){var a=s.w/s.h;i=a<1?t*a/s.w:t/s.w}else i=o.width/n.w;var r={w:Math.round(s.w*i),h:Math.round(s.h*i)},h={x:(n.x-n.w/2)*i,y:(n.y-n.h/2)*i,w:n.w*i,h:n.h*i,r:n.r,sV:n.sV,sH:n.sH};return{cutSize:r,showInfo:h}}},{key:"clip",value:function(t,e,i){var o=this.root.getEventList("PhotoMain");if(!o||!o.originalImg||!o.img)return null;var n=o.originalImg,s=this.getCutInfo(t),a=s.cutSize,r=s.showInfo,h=this._isRound?A.clipByRound(n,a.w,a.h,r,e,i):A.clipBy(n,a.w,a.h,r,e,i);return{src:h,file:A.base64ToBlob(h)}}},{key:"_getMaskRect",value:function(){var t,e,i=this.width/this.height,o=this.root.drawWidth/this.root.drawHeight;return i<o?(e=.75*this.root.drawHeight,t=i*e):(t=.75*this.root.drawWidth,e=t/i),{x:-t/2,y:-e/2,w:t,h:e}}},{key:"_animation",value:function(t,e,i,o){var n=this;if(t||e||i||o){var s=this.maskRect,a=s.x,r=s.y,h=s.w,c=s.h;this._maskRect=this.maskRect,this.maskRect={x:a+t,y:r+e,w:h+i,h:c+o},this.animation=X({duration:300,timing:"ease-in-out",change:function(s,u){n._maskRect={x:a+u*t,y:r+u*e,w:h+u*i,h:c+u*o},n._draw(n._maskRect,!1,n)},end:function(){n._maskRect&&(n.maskRect=n._maskRect,n._maskRect=void 0)}}).start()}}},{key:"_isHover",value:function(t,e){var i=this.faultTolerant,o=2,n=this.maskRect,s=n.x,a=n.y,r=n.w,h=n.h;return t>=s-i-o&&t<=s+i&&e>=a-i-o&&e<=a+i?"Top Left":t>=s+r-i-o&&t<=s+r+i&&e>=a-i-o&&e<=a+i?"Top Right":t>=s-i-o&&t<=s+i&&e>=a+h-i-o&&e<=a+h+i?"Bottom Left":t>=s+r-i-o&&t<=s+r+i&&e>=a+h-i-o&&e<=a+h+i?"Bottom Right":t>=s&&t<=s+r&&e>=a-i-o&&e<=a+i?"Top":t>=s-i-o&&t<=s+i&&e>=a&&e<=a+h?"Left":t>=s+r-i-o&&t<=s+r+i&&e>=a&&e<=a+h?"Right":t>=s&&t<=s+r&&e>=a+h-i-o&&e<=a+h+i?"Bottom":void 0}},{key:"touchStart",value:function(t){if(console.log("touchStart"),this.resize&&null===this.touche){var e=t[0];this.touchePosition=this._isHover(e.x,e.y),this.touchePosition&&(this.root.setPriority(this),this.touche=e,this._draw(this.maskRect,!0,this))}}},{key:"touchEnd",value:function(){null!==this.touche&&this.touchePosition&&(this.touche=null,this.maskRect.w<0&&(this.maskRect.x+=this.maskRect.w,this.maskRect.w*=-1),this.maskRect.h<0&&(this.maskRect.y+=this.maskRect.h,this.maskRect.h*=-1),this.reset(this.maskRect.w,this.maskRect.h),this.root.deletePriority(this.className),this.touchePosition=void 0,this._draw(this._maskRect||this.maskRect,!1,this),this.root.cursor="default")}},{key:"touchMove",value:function(t){var e=this;if(this.resize&&null!==this.touche&&this.touchePosition){var i=this.touche.id,o=t.find((function(t){return t.id===i}));o&&(this.touchePosition.split(" ").forEach((function(t){switch(t){case"Top":e._moveTop(o);break;case"Bottom":e._moveBottom(o);break;case"Left":e._moveLeft(o);break;case"Right":e._moveRight(o);break}})),this.touche=o,this._draw(this.maskRect,!0,this),this.root.onPhotoChange&&this.root.onPhotoChange({target:this,type:"maskMove"}))}else if(this.resize){var n=this._isHover(t[0].x,t[0].y);this.root.cursor=n&&Q.get(n)||"move"}}},{key:"wheelStart",value:function(){}},{key:"wheelEnd",value:function(){}},{key:"wheelChange",value:function(){}},{key:"_moveTop",value:function(t){var e=t.y-this.touche.y;this.maskRect.y+=e,this.maskRect.h-=e}},{key:"_moveBottom",value:function(t){var e=t.y-this.touche.y;this.maskRect.h+=e}},{key:"_moveLeft",value:function(t){var e=t.x-this.touche.x;this.maskRect.x+=e,this.maskRect.w-=e}},{key:"_moveRight",value:function(t){var e=t.x-this.touche.x;this.maskRect.w+=e}}]),t}(),et=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.mask=null,t.viewBox="0 0 0 0",t.drawWidth=0,t.drawHeight=0,t.round="M0,150 V+150 a150,150 0 1 0 0,-1",t.rect={x:0,y:0,width:0,height:0},t.border="10, 5",t.thisRound=!1,t.thisResize=!0,t}return Object(r["a"])(i,[{key:"photoRoot",get:function(){var t;return null===(t=this.cutRoot)||void 0===t?void 0:t.photoRoot}},{key:"TLHorn",get:function(){var t=this.rect.x,e=this.rect.y;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e+15," H").concat(t-5," V").concat(e+15," H").concat(t-5," V").concat(e-5," H").concat(t+15," V").concat(e-5," H").concat(t+15," V").concat(e," Z")}},{key:"TRHorn",get:function(){var t=this.rect.x+this.rect.width,e=this.rect.y;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e+15," H").concat(t+5," V").concat(e+15," H").concat(t+5," V").concat(e-5," H").concat(t-15," V").concat(e-5," H").concat(t-15," V").concat(e," Z")}},{key:"BLHorn",get:function(){var t=this.rect.x,e=this.rect.y+this.rect.height;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e-15," H").concat(t-5," V").concat(e-15," H").concat(t-5," V").concat(e+5," H").concat(t+15," V").concat(e+5," H").concat(t+15," V").concat(e," Z")}},{key:"BRHorn",get:function(){var t=this.rect.x+this.rect.width,e=this.rect.y+this.rect.height;return"M".concat(t,",").concat(e," H").concat(t," V").concat(e-15," H").concat(t+5," V").concat(e-15," H").concat(t+5," V").concat(e+5," H").concat(t-15," V").concat(e+5," H").concat(t-15," V").concat(e," Z")}},{key:"watchWidth",value:function(t){this.mask&&this.mask.reset(t,this.height)}},{key:"watchHeight",value:function(t){this.mask&&this.mask.reset(this.width,t)}},{key:"watchIsRound",value:function(t){this.mask&&(this.mask.isRound=t)}},{key:"watchResize",value:function(t){this.mask&&this.mask.setResize(t)}},{key:"watchThisRound",value:function(t){this.mask&&this.mask.isRound!==t&&(this.mask.isRound=t)}},{key:"watchThisResize",value:function(t){this.mask&&this.mask.getResize()!==t&&this.mask.setResize(t)}},{key:"created",value:function(){this.cutRoot=this.getCutRoot()}},{key:"mounted",value:function(){var t=this;window.aaa=this,this.thisRound=this.isRound,this.thisResize=this.resize,setTimeout((function(){t.viewBox="0 0 ".concat(t.photoRoot.drawWidth," ").concat(t.photoRoot.drawHeight),t.drawWidth=t.photoRoot.drawWidth,t.drawHeight=t.photoRoot.drawHeight,t.mask=new tt(t.photoRoot,t.width,t.height,t.resize,(function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;t.setPathOption(e,i,o)})),t.mask.isRound=t.isRound}),0)}},{key:"setPathOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.thisRound=i.isRound,this.thisResize=i.getResize();var o=t.x,n=t.y,s=t.w,a=t.h;o+=this.photoRoot.core.x,n+=this.photoRoot.core.y,s<0&&(o+=s,s*=-1),a<0&&(n+=a,a*=-1);var r=s/2,h=a/2;this.thisRound?this.round="M".concat(o,",").concat(n+h," a").concat(r,",").concat(h," 0 1 0 0,-1"):this.round="M".concat(o,",").concat(n," H").concat(s+o," V").concat(a+n," H").concat(o," V").concat(n),this.rect={x:o,y:n,width:s,height:a},this.border=e?"10, 0":"10, 5"}}]),i}(l["h"]);Object(u["a"])([Object(l["d"])({type:String,default:"rgba(0,0,0,.5)"})],et.prototype,"color",void 0),Object(u["a"])([Object(l["d"])({type:String,default:"#ff5500"})],et.prototype,"borderColor",void 0),Object(u["a"])([Object(l["d"])({type:Number,default:1})],et.prototype,"width",void 0),Object(u["a"])([Object(l["d"])({type:Number,default:1})],et.prototype,"height",void 0),Object(u["a"])([Object(l["d"])({type:Boolean,default:!1})],et.prototype,"isRound",void 0),Object(u["a"])([Object(l["d"])({type:Boolean,default:!0})],et.prototype,"resize",void 0),Object(u["a"])([Object(l["i"])("width")],et.prototype,"watchWidth",null),Object(u["a"])([Object(l["i"])("height")],et.prototype,"watchHeight",null),Object(u["a"])([Object(l["i"])("isRound")],et.prototype,"watchIsRound",null),Object(u["a"])([Object(l["i"])("resize")],et.prototype,"watchResize",null),Object(u["a"])([Object(l["i"])("thisRound")],et.prototype,"watchThisRound",null),Object(u["a"])([Object(l["i"])("thisResize")],et.prototype,"watchThisResize",null),Object(u["a"])([Object(l["c"])("getCutRoot")],et.prototype,"getCutRoot",void 0),et=Object(u["a"])([l["a"]],et);var it=et,ot=it,nt=(i("009a"),Object(b["a"])(ot,G,K,!1,null,"c5bbf46c",null)),st=nt.exports,at=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.loading=!1,t.hasMenu=!1,t.sliderAngle=0,t.cutSize=null,t.photoRoot=new B,t}return Object(r["a"])(i,[{key:"thickness",get:function(){return void 0===this.menuThickness||this.menuThickness<0?this.hasMenu?120:50:this.menuThickness}},{key:"mainPosition",get:function(){var t=this.thickness+"px",e={top:"0",left:"0",right:"0",bottom:"0"};return"top"===this.menuPosition?e.top=t:"left"===this.menuPosition?e.left=t:"right"===this.menuPosition?e.right=t:e.bottom=t,e}},{key:"memuPosition",get:function(){var t=this.thickness+"px";return"top"===this.menuPosition?{top:"0",left:"0",right:"0",height:t}:"left"===this.menuPosition?{top:"0",left:"0",bottom:"0",width:t}:"right"===this.menuPosition?{top:"0",right:"0",bottom:"0",width:t}:{left:"0",right:"0",bottom:"0",height:t}}},{key:"watchSrc",value:function(t){t&&this.setImg()}},{key:"watchInitAngle",value:function(t){if(void 0!==t){var e=this.photoRoot.getEventList("PhotoMain");if(e){var i=(e.showRect.r+t)%360;this.sliderAngle=i>180?i-360:i<-180?i+360:i}}}},{key:"watchSliderAngle",value:function(t){var e=this.photoRoot.getEventList("PhotoMain");e&&e.setAngle(parseInt(t))}},{key:"created",value:function(){this.watchInitAngle(this.initAngle),this.$slots.menu&&(this.hasMenu=!0),this.photoRoot.onPhotoChange=this.onStateChange}},{key:"mounted",value:function(){var t=this;this.photoRoot.init(this.main,this.magnification),setTimeout((function(){t.setImg()}),0)}},{key:"onChangeEvent",value:function(t,e){return{blob:t,base64:e}}},{key:"onStateChange",value:function(t){var e=t.type;if(["imageInit","imageAngle","imageReset","imageScale","maskMove"].indexOf(e)>-1){var i=this.photoRoot.getEventList("PhotoMask");if(i){var o,n,s=i.getCutInfo(this.maxPixel),a=null===s||void 0===s?void 0:s.cutSize;(null===a||void 0===a?void 0:a.w)===(null===(o=this.cutSize)||void 0===o?void 0:o.w)&&(null===a||void 0===a?void 0:a.h)===(null===(n=this.cutSize)||void 0===n?void 0:n.h)||(this.cutSize=a||null)}}}},{key:"getCutRoot",value:function(){return this}},{key:"setImg",value:function(){var t=this.photoRoot.getEventList("PhotoMain"),e=this.src;e&&t&&t.setSrc(e,this.initAngle),void 0!==this.initAngle&&(this.sliderAngle=this.initAngle%180)}},{key:"sureCut",value:function(){var t=this.photoRoot.getEventList("PhotoMask");if(t){var e=t.clip(this.maxPixel,this.encoderOptions,this.format);e&&this.onChangeEvent(e.file,e.src)}}},{key:"scale",value:function(t){var e=this.photoRoot.getEventList("PhotoMain");null===e||void 0===e||e.scale(t)}}]),i}(l["h"]);Object(u["a"])([Object(l["d"])({type:String,required:!1})],at.prototype,"backgroundColor",void 0),Object(u["a"])([Object(l["d"])({type:Number,default:1.5})],at.prototype,"magnification",void 0),Object(u["a"])([Object(l["d"])({type:String,default:null})],at.prototype,"src",void 0),Object(u["a"])([Object(l["d"])({type:Number,required:!1})],at.prototype,"initAngle",void 0),Object(u["a"])([Object(l["d"])({type:Number,required:!1})],at.prototype,"maxPixel",void 0),Object(u["a"])([Object(l["d"])({type:Number,required:!1})],at.prototype,"encoderOptions",void 0),Object(u["a"])([Object(l["d"])({type:String,required:!1})],at.prototype,"format",void 0),Object(u["a"])([Object(l["d"])({type:Object,default:function(){return{width:1,height:1,isRound:!1,resize:!0}}})],at.prototype,"mskOption",void 0),Object(u["a"])([Object(l["d"])({type:Boolean,required:!1})],at.prototype,"rotateControl",void 0),Object(u["a"])([Object(l["d"])({type:Number,required:!1})],at.prototype,"menuThickness",void 0),Object(u["a"])([Object(l["d"])({type:String,default:"bottom"})],at.prototype,"menuPosition",void 0),Object(u["a"])([Object(l["g"])()],at.prototype,"main",void 0),Object(u["a"])([Object(l["i"])("src")],at.prototype,"watchSrc",null),Object(u["a"])([Object(l["i"])("initAngle")],at.prototype,"watchInitAngle",null),Object(u["a"])([Object(l["i"])("sliderAngle")],at.prototype,"watchSliderAngle",null),Object(u["a"])([Object(l["b"])("on-change")],at.prototype,"onChangeEvent",null),Object(u["a"])([Object(l["f"])("getCutRoot")],at.prototype,"getCutRoot",null),at=Object(u["a"])([Object(l["a"])({components:{VuePictureCutCanvas:Z,VuePictureCutMask:st}})],at);var rt=at,ht=rt,ct=(i("f08b"),Object(b["a"])(ht,O,P,!1,null,null,null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-picture-cut-menu dark-theme",class:[["default","dark","gray"].indexOf(t.theme)>-1?t.theme+"-theme":"default-theme"]},[i("div",{staticClass:"vue-picture-cut-menu_slider"},[i("div",{staticClass:"vue-picture-cut-menu_slider-box"},[i("span",[t._v(t._s(t.menuRotateName))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderAngle,expression:"sliderAngle"}],attrs:{type:"range",min:0,max:360},domProps:{value:t.sliderAngle},on:{__r:function(e){t.sliderAngle=e.target.value}}}),i("div",{staticClass:"vue-picture-cut-menu_slider-box-bar"},[i("div",{staticClass:"vue-picture-cut-menu_slider-box-button",style:{left:100*t.sliderAngle/361+"%"}},[i("div",{staticClass:"vue-picture-cut-menu_slider-box-tips"},[t._v(" "+t._s(t.sliderAngle)+"° ")])])])])]),i("div",{staticClass:"vue-picture-cut-menu_slider"},[i("div",{staticClass:"vue-picture-cut-menu_slider-box"},[i("span",[t._v(" 缩放 ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.zoom,expression:"zoom"}],attrs:{type:"range",min:0,max:10,step:.1},domProps:{value:t.zoom},on:{change:t.scale,__r:function(e){t.zoom=e.target.value}}}),i("div",{staticClass:"vue-picture-cut-menu_slider-box-bar"},[i("div",{staticClass:"vue-picture-cut-menu_slider-box-button",style:{left:10*t.zoom+"%"}},[i("div",{staticClass:"vue-picture-cut-menu_slider-box-tips"},[t._v(" "+t._s(t.zoom)+" ")])])])])]),i("div",{staticClass:"vue-picture-cut-menu_box"},[i("div",{staticClass:"vue-picture-cut-menu_box-content"},[i("div",{staticClass:"vue-picture-cut-menu_box-list",staticStyle:{width:"558px"}},[i("div",{staticClass:"vue-picture-cut-menu_box-item v-p-icon_rotate-left",on:{click:function(e){return t.rotate(90,!0)}}}),i("div",{staticClass:"vue-picture-cut-menu_box-item v-p-icon_rotate-right",on:{click:function(e){return t.rotate(-90,!0)}}})])])]),i("div",{staticClass:"vue-picture-cut-menu_confirm",staticStyle:{"max-width":"558px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.cancel,expression:"cancel"}],staticClass:"__cancel",on:{click:t.onCancelEvent}},[t._v(t._s(t.cancelName))]),i("div",{staticClass:"__sure",class:{__center:!t.cancel},on:{click:t.sureCut}},[t._v(t._s(t.confirmName))])])])},vt=[],dt=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.root=null,t.sliderAngle=0,t.zoom=1,t}return Object(r["a"])(i,[{key:"photoRoot",get:function(){var t,e;return(null===(t=this.root)||void 0===t?void 0:t.photoRoot)||(null===(e=this.cutRoot)||void 0===e?void 0:e.photoRoot)}},{key:"watchSliderAngle",value:function(t){if(this.photoRoot){var e=this.photoRoot.getEventList("PhotoMain");e&&e.setAngle(parseInt(t))}}},{key:"created",value:function(){this.getCutRoot&&(this.cutRoot=this.getCutRoot())}},{key:"mounted",value:function(){var t=this;this.$bus.$on("scale",(function(e){t.zoom=e}))}},{key:"onChangeEvent",value:function(t,e){return{blob:t,base64:e}}},{key:"onCancelEvent",value:function(){}},{key:"scale",value:function(){if(this.photoRoot){var t=this.photoRoot.getEventList("PhotoMain");null===t||void 0===t||t.scale(this.zoom,"origin")}}},{key:"sureCut",value:function(){if(this.photoRoot){var t=this.photoRoot.getEventList("PhotoMask");if(t){var e=t.clip(this.maxPixel,this.encoderOptions,this.format);e&&this.onChangeEvent(e.file,e.src)}}}},{key:"setMaskSize",value:function(t,e){if(this.photoRoot){var i=this.photoRoot.getEventList("PhotoMask");i&&(i.reset(t,e),i.setResize(!1))}}},{key:"setMaskSizeToOriginal",value:function(){if(this.photoRoot){var t=this.photoRoot.getEventList("PhotoMain");t&&this.setMaskSize(t.imgRect.w,t.imgRect.h)}}},{key:"setMaskResize",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.photoRoot){var e=this.photoRoot.getEventList("PhotoMask");e&&e.setResize(t)}}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.photoRoot&&t%360!==0){var i=this.photoRoot.getEventList("PhotoMain");if(i){var o=(i.showRect.r+t)%360;this.sliderAngle=o>180?o-360:o<-180?o+360:o,i.setAngle(i.showRect.r+t,e)}}}},{key:"setFlipV",value:function(){if(this.photoRoot){var t=this.photoRoot.getEventList("PhotoMain");t&&t.setFlipV(1===t.showRect.sV,!0)}}},{key:"setFlipH",value:function(){if(this.photoRoot){var t=this.photoRoot.getEventList("PhotoMain");t&&t.setFlipH(1===t.showRect.sH,!0)}}}]),i}(l["h"]);Object(u["a"])([Object(l["d"])({type:Object,default:null})],dt.prototype,"root",void 0),Object(u["a"])([Object(l["d"])({type:String,default:"default"})],dt.prototype,"theme",void 0),Object(u["a"])([Object(l["d"])({type:Number,required:!1})],dt.prototype,"maxPixel",void 0),Object(u["a"])([Object(l["d"])({type:Number,required:!1})],dt.prototype,"encoderOptions",void 0),Object(u["a"])([Object(l["d"])({type:String,required:!1})],dt.prototype,"format",void 0),Object(u["a"])([Object(l["d"])({type:Boolean,default:!0})],dt.prototype,"cancel",void 0),Object(u["a"])([Object(l["d"])({type:String,default:"Cancel"})],dt.prototype,"cancelName",void 0),Object(u["a"])([Object(l["d"])({type:String,default:"Ok"})],dt.prototype,"confirmName",void 0),Object(u["a"])([Object(l["d"])({type:String,default:"auto"})],dt.prototype,"sizeAutoName",void 0),Object(u["a"])([Object(l["d"])({type:String,default:"raw"})],dt.prototype,"sizeRawName",void 0),Object(u["a"])([Object(l["d"])({type:String,default:"Rotate"})],dt.prototype,"menuRotateName",void 0),Object(u["a"])([Object(l["i"])("sliderAngle")],dt.prototype,"watchSliderAngle",null),Object(u["a"])([Object(l["c"])({from:"getCutRoot",default:null})],dt.prototype,"getCutRoot",void 0),Object(u["a"])([Object(l["b"])("on-change")],dt.prototype,"onChangeEvent",null),Object(u["a"])([Object(l["b"])("on-cancel")],dt.prototype,"onCancelEvent",null),dt=Object(u["a"])([l["a"]],dt);var gt=dt,ft=gt,mt=(i("57f5"),Object(b["a"])(ft,lt,vt,!1,null,null,null)),pt=mt.exports,yt={install:function(t){t.component("vue-picture-cut",ut),t.component("vue-picture-cut-mask",st),t.component("vue-picture-cut-menu",pt)}},wt=i("5c96"),Rt=i.n(wt);i("0fae");o["default"].config.productionTip=!1,o["default"].use(yt),o["default"].use(Rt.a,{size:"mini"}),o["default"].use(x["a"]);var bt=new x["a"].Bus,kt=new o["default"]({el:"#app",bus:bt,render:function(t){return t(_)}}).$mount("#app"),_t=e["default"]=kt},f08b:function(t,e,i){"use strict";i("3aa3")}});